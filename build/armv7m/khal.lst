ARM GAS  /var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"khal.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "arch/armv7m/kernel/src/khal.c"
  18              		.section	.text.kCoreSetPriorityGrouping,"ax",%progbits
  19              		.align	1
  20              		.global	kCoreSetPriorityGrouping
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	kCoreSetPriorityGrouping:
  26              	.LVL0:
  27              	.LFB0:
   1:arch/armv7m/kernel/src/khal.c **** /******************************************************************************
   2:arch/armv7m/kernel/src/khal.c ****  *
   3:arch/armv7m/kernel/src/khal.c ****  *                     [RK0 - Real-Time Kernel '0']
   4:arch/armv7m/kernel/src/khal.c ****  *
   5:arch/armv7m/kernel/src/khal.c ****  * Version          :   V0.4.0
   6:arch/armv7m/kernel/src/khal.c ****  * Architecture     :   ARMv7m
   7:arch/armv7m/kernel/src/khal.c ****  *
   8:arch/armv7m/kernel/src/khal.c ****  *
   9:arch/armv7m/kernel/src/khal.c ****  * Copyright (c) 2025 Antonio Giacomelli
  10:arch/armv7m/kernel/src/khal.c ****  *
  11:arch/armv7m/kernel/src/khal.c ****  *
  12:arch/armv7m/kernel/src/khal.c ****  ******************************************************************************/
  13:arch/armv7m/kernel/src/khal.c **** /******************************************************************************
  14:arch/armv7m/kernel/src/khal.c ****  *
  15:arch/armv7m/kernel/src/khal.c ****  *  Module          : HAL
  16:arch/armv7m/kernel/src/khal.c ****  *  Depends on      : -
  17:arch/armv7m/kernel/src/khal.c ****  *  Provides to     : EXECUTIVE
  18:arch/armv7m/kernel/src/khal.c ****  *  Public API      : NO
  19:arch/armv7m/kernel/src/khal.c ****  *
  20:arch/armv7m/kernel/src/khal.c ****  *****************************************************************************/
  21:arch/armv7m/kernel/src/khal.c **** 
  22:arch/armv7m/kernel/src/khal.c **** /*
  23:arch/armv7m/kernel/src/khal.c **** 
  24:arch/armv7m/kernel/src/khal.c ****  This is intended as a minimal CPU HAL for ARMv7M
  25:arch/armv7m/kernel/src/khal.c ****  handling NVIC, SCB, SysTick.
  26:arch/armv7m/kernel/src/khal.c ****  It should be compatible with and M3, M4, M7 cores.
  27:arch/armv7m/kernel/src/khal.c **** 
  28:arch/armv7m/kernel/src/khal.c ****  */
  29:arch/armv7m/kernel/src/khal.c **** 
  30:arch/armv7m/kernel/src/khal.c **** #include <khal.h>
  31:arch/armv7m/kernel/src/khal.c **** 
ARM GAS  /var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s 			page 2


  32:arch/armv7m/kernel/src/khal.c **** unsigned kCoreSetPriorityGrouping( unsigned priorityGroup)
  33:arch/armv7m/kernel/src/khal.c **** {
  28              		.loc 1 33 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  34:arch/armv7m/kernel/src/khal.c **** 	unsigned reg_value;
  33              		.loc 1 34 2 view .LVU1
  35:arch/armv7m/kernel/src/khal.c **** 	unsigned PriorityGroupTmp = (priorityGroup & 0x07UL);
  34              		.loc 1 35 2 view .LVU2
  36:arch/armv7m/kernel/src/khal.c **** 
  37:arch/armv7m/kernel/src/khal.c **** 	reg_value = RK_CORE_SCB->AIRCR;
  35              		.loc 1 37 2 view .LVU3
  36              		.loc 1 37 12 is_stmt 0 view .LVU4
  37 0000 064B     		ldr	r3, .L2
  38 0002 DA68     		ldr	r2, [r3, #12]
  38:arch/armv7m/kernel/src/khal.c **** 	reg_value &= ~((0xFFFFUL << 16) | (0x07UL << 8));
  39              		.loc 1 38 2 is_stmt 1 view .LVU5
  39:arch/armv7m/kernel/src/khal.c **** 	reg_value = ((0x5FAUL << 16) | (PriorityGroupTmp << 8));
  40              		.loc 1 39 2 view .LVU6
  41              		.loc 1 39 51 is_stmt 0 view .LVU7
  42 0004 0002     		lsls	r0, r0, #8
  43              	.LVL1:
  44              		.loc 1 39 51 view .LVU8
  45 0006 00F4E060 		and	r0, r0, #1792
  46              		.loc 1 39 12 view .LVU9
  47 000a 40F0BF60 		orr	r0, r0, #100139008
  48 000e 40F40030 		orr	r0, r0, #131072
  49              	.LVL2:
  40:arch/armv7m/kernel/src/khal.c **** 	RK_CORE_SCB->AIRCR = reg_value;
  50              		.loc 1 40 2 is_stmt 1 view .LVU10
  51              		.loc 1 40 21 is_stmt 0 view .LVU11
  52 0012 D860     		str	r0, [r3, #12]
  41:arch/armv7m/kernel/src/khal.c **** 
  42:arch/armv7m/kernel/src/khal.c **** 	return (RK_CORE_SCB->AIRCR & (0x07UL << 8));
  53              		.loc 1 42 2 is_stmt 1 view .LVU12
  54              		.loc 1 42 21 is_stmt 0 view .LVU13
  55 0014 D868     		ldr	r0, [r3, #12]
  56              	.LVL3:
  43:arch/armv7m/kernel/src/khal.c **** }
  57              		.loc 1 43 1 view .LVU14
  58 0016 00F4E060 		and	r0, r0, #1792
  59 001a 7047     		bx	lr
  60              	.L3:
  61              		.align	2
  62              	.L2:
  63 001c 00ED00E0 		.word	-536810240
  64              		.cfi_endproc
  65              	.LFE0:
  67              		.section	.text.kCoreGetPriorityGrouping,"ax",%progbits
  68              		.align	1
  69              		.global	kCoreGetPriorityGrouping
  70              		.syntax unified
  71              		.thumb
  72              		.thumb_func
  74              	kCoreGetPriorityGrouping:
ARM GAS  /var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s 			page 3


  75              	.LFB1:
  44:arch/armv7m/kernel/src/khal.c **** 
  45:arch/armv7m/kernel/src/khal.c **** unsigned kCoreGetPriorityGrouping( void)
  46:arch/armv7m/kernel/src/khal.c **** {
  76              		.loc 1 46 1 is_stmt 1 view -0
  77              		.cfi_startproc
  78              		@ args = 0, pretend = 0, frame = 0
  79              		@ frame_needed = 0, uses_anonymous_args = 0
  80              		@ link register save eliminated.
  47:arch/armv7m/kernel/src/khal.c **** 	return ((RK_CORE_SCB->AIRCR & (0x07UL << 8)) >> 8);
  81              		.loc 1 47 2 view .LVU16
  82              		.loc 1 47 22 is_stmt 0 view .LVU17
  83 0000 024B     		ldr	r3, .L5
  84 0002 D868     		ldr	r0, [r3, #12]
  48:arch/armv7m/kernel/src/khal.c **** }
  85              		.loc 1 48 1 view .LVU18
  86 0004 C0F30220 		ubfx	r0, r0, #8, #3
  87 0008 7047     		bx	lr
  88              	.L6:
  89 000a 00BF     		.align	2
  90              	.L5:
  91 000c 00ED00E0 		.word	-536810240
  92              		.cfi_endproc
  93              	.LFE1:
  95              		.section	.text.kCoreEnableFaults,"ax",%progbits
  96              		.align	1
  97              		.global	kCoreEnableFaults
  98              		.syntax unified
  99              		.thumb
 100              		.thumb_func
 102              	kCoreEnableFaults:
 103              	.LFB2:
  49:arch/armv7m/kernel/src/khal.c **** 
  50:arch/armv7m/kernel/src/khal.c **** void kCoreEnableFaults( void)
  51:arch/armv7m/kernel/src/khal.c **** {
 104              		.loc 1 51 1 is_stmt 1 view -0
 105              		.cfi_startproc
 106              		@ args = 0, pretend = 0, frame = 0
 107              		@ frame_needed = 0, uses_anonymous_args = 0
 108              		@ link register save eliminated.
  52:arch/armv7m/kernel/src/khal.c **** 	RK_CORE_SCB->SHCSR |= 0x00070000;/* Enable Usage, Bus, and Memory Fault */
 109              		.loc 1 52 2 view .LVU20
 110              		.loc 1 52 13 is_stmt 0 view .LVU21
 111 0000 024A     		ldr	r2, .L8
 112 0002 536A     		ldr	r3, [r2, #36]
 113              		.loc 1 52 21 view .LVU22
 114 0004 43F4E023 		orr	r3, r3, #458752
 115 0008 5362     		str	r3, [r2, #36]
  53:arch/armv7m/kernel/src/khal.c **** }
 116              		.loc 1 53 1 view .LVU23
 117 000a 7047     		bx	lr
 118              	.L9:
 119              		.align	2
 120              	.L8:
 121 000c 00ED00E0 		.word	-536810240
 122              		.cfi_endproc
 123              	.LFE2:
ARM GAS  /var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s 			page 4


 125              		.section	.text.kCoreSetInterruptPriority,"ax",%progbits
 126              		.align	1
 127              		.global	kCoreSetInterruptPriority
 128              		.syntax unified
 129              		.thumb
 130              		.thumb_func
 132              	kCoreSetInterruptPriority:
 133              	.LVL4:
 134              	.LFB3:
  54:arch/armv7m/kernel/src/khal.c **** 
  55:arch/armv7m/kernel/src/khal.c **** void kCoreSetInterruptPriority( int IRQn, unsigned priority)
  56:arch/armv7m/kernel/src/khal.c **** {
 135              		.loc 1 56 1 is_stmt 1 view -0
 136              		.cfi_startproc
 137              		@ args = 0, pretend = 0, frame = 0
 138              		@ frame_needed = 0, uses_anonymous_args = 0
 139              		@ link register save eliminated.
  57:arch/armv7m/kernel/src/khal.c **** 	if (IRQn < 0)
 140              		.loc 1 57 2 view .LVU25
 141              		.loc 1 57 5 is_stmt 0 view .LVU26
 142 0000 0028     		cmp	r0, #0
 143              		.loc 1 57 5 view .LVU27
 144 0002 08DB     		blt	.L13
  58:arch/armv7m/kernel/src/khal.c **** 	{
  59:arch/armv7m/kernel/src/khal.c **** 		/* System handler priority */
  60:arch/armv7m/kernel/src/khal.c **** 		RK_CORE_SCB->SHP[(((unsigned) IRQn) & 0xF) - 4] =
  61:arch/armv7m/kernel/src/khal.c **** 				(unsigned char) ((priority << 4) & 0xFF);
  62:arch/armv7m/kernel/src/khal.c **** 	}
  63:arch/armv7m/kernel/src/khal.c **** 	else
  64:arch/armv7m/kernel/src/khal.c **** 	{
  65:arch/armv7m/kernel/src/khal.c **** 		/* IRQ priority */
  66:arch/armv7m/kernel/src/khal.c **** 		RK_CORE_NVIC->IP[IRQn] = (unsigned char) ((priority << 4) & 0xFF);
 145              		.loc 1 66 3 is_stmt 1 view .LVU28
 146              		.loc 1 66 28 is_stmt 0 view .LVU29
 147 0004 0901     		lsls	r1, r1, #4
 148              	.LVL5:
 149              		.loc 1 66 28 view .LVU30
 150 0006 C9B2     		uxtb	r1, r1
 151              		.loc 1 66 26 view .LVU31
 152 0008 00F16040 		add	r0, r0, #-536870912
 153              	.LVL6:
 154              		.loc 1 66 26 view .LVU32
 155 000c 00F56140 		add	r0, r0, #57600
 156              	.LVL7:
 157              		.loc 1 66 26 view .LVU33
 158 0010 80F80013 		strb	r1, [r0, #768]
  67:arch/armv7m/kernel/src/khal.c **** 	}
  68:arch/armv7m/kernel/src/khal.c **** }
 159              		.loc 1 68 1 view .LVU34
 160 0014 7047     		bx	lr
 161              	.LVL8:
 162              	.L13:
  60:arch/armv7m/kernel/src/khal.c **** 				(unsigned char) ((priority << 4) & 0xFF);
 163              		.loc 1 60 3 is_stmt 1 view .LVU35
  60:arch/armv7m/kernel/src/khal.c **** 				(unsigned char) ((priority << 4) & 0xFF);
 164              		.loc 1 60 39 is_stmt 0 view .LVU36
 165 0016 00F00F00 		and	r0, r0, #15
ARM GAS  /var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s 			page 5


 166              	.LVL9:
  61:arch/armv7m/kernel/src/khal.c **** 	}
 167              		.loc 1 61 5 view .LVU37
 168 001a 0901     		lsls	r1, r1, #4
 169              	.LVL10:
  61:arch/armv7m/kernel/src/khal.c **** 	}
 170              		.loc 1 61 5 view .LVU38
 171 001c C9B2     		uxtb	r1, r1
  60:arch/armv7m/kernel/src/khal.c **** 				(unsigned char) ((priority << 4) & 0xFF);
 172              		.loc 1 60 51 view .LVU39
 173 001e 014B     		ldr	r3, .L14
 174 0020 1954     		strb	r1, [r3, r0]
 175 0022 7047     		bx	lr
 176              	.L15:
 177              		.align	2
 178              	.L14:
 179 0024 14ED00E0 		.word	-536810220
 180              		.cfi_endproc
 181              	.LFE3:
 183              		.section	.text.kCoreGetInterruptPriority,"ax",%progbits
 184              		.align	1
 185              		.global	kCoreGetInterruptPriority
 186              		.syntax unified
 187              		.thumb
 188              		.thumb_func
 190              	kCoreGetInterruptPriority:
 191              	.LVL11:
 192              	.LFB4:
  69:arch/armv7m/kernel/src/khal.c **** 
  70:arch/armv7m/kernel/src/khal.c **** unsigned kCoreGetInterruptPriority( int IRQn)
  71:arch/armv7m/kernel/src/khal.c **** {
 193              		.loc 1 71 1 is_stmt 1 view -0
 194              		.cfi_startproc
 195              		@ args = 0, pretend = 0, frame = 0
 196              		@ frame_needed = 0, uses_anonymous_args = 0
 197              		@ link register save eliminated.
  72:arch/armv7m/kernel/src/khal.c **** 	if (IRQn < 0)
 198              		.loc 1 72 2 view .LVU41
 199              		.loc 1 72 5 is_stmt 0 view .LVU42
 200 0000 0028     		cmp	r0, #0
 201              		.loc 1 72 5 view .LVU43
 202 0002 07DB     		blt	.L19
  73:arch/armv7m/kernel/src/khal.c **** 	{
  74:arch/armv7m/kernel/src/khal.c **** 		/* System handler priority */
  75:arch/armv7m/kernel/src/khal.c **** 		return (RK_CORE_SCB->SHP[(((unsigned) IRQn) & 0xF) - 4] >> 4);
  76:arch/armv7m/kernel/src/khal.c **** 	}
  77:arch/armv7m/kernel/src/khal.c **** 	else
  78:arch/armv7m/kernel/src/khal.c **** 	{
  79:arch/armv7m/kernel/src/khal.c **** 		/* IRQ priority */
  80:arch/armv7m/kernel/src/khal.c **** 		return (RK_CORE_NVIC->IP[IRQn] >> 4);
 203              		.loc 1 80 3 is_stmt 1 view .LVU44
 204              		.loc 1 80 27 is_stmt 0 view .LVU45
 205 0004 00F16040 		add	r0, r0, #-536870912
 206              	.LVL12:
 207              		.loc 1 80 27 view .LVU46
 208 0008 00F56140 		add	r0, r0, #57600
 209              	.LVL13:
ARM GAS  /var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s 			page 6


 210              		.loc 1 80 27 view .LVU47
 211 000c 90F80003 		ldrb	r0, [r0, #768]	@ zero_extendqisi2
 212              	.LVL14:
 213              		.loc 1 80 34 view .LVU48
 214 0010 0009     		lsrs	r0, r0, #4
  81:arch/armv7m/kernel/src/khal.c **** 	}
  82:arch/armv7m/kernel/src/khal.c **** }
 215              		.loc 1 82 1 view .LVU49
 216 0012 7047     		bx	lr
 217              	.LVL15:
 218              	.L19:
  75:arch/armv7m/kernel/src/khal.c **** 	}
 219              		.loc 1 75 3 is_stmt 1 view .LVU50
  75:arch/armv7m/kernel/src/khal.c **** 	}
 220              		.loc 1 75 47 is_stmt 0 view .LVU51
 221 0014 00F00F00 		and	r0, r0, #15
 222              	.LVL16:
  75:arch/armv7m/kernel/src/khal.c **** 	}
 223              		.loc 1 75 27 view .LVU52
 224 0018 014B     		ldr	r3, .L20
 225 001a 185C     		ldrb	r0, [r3, r0]	@ zero_extendqisi2
  75:arch/armv7m/kernel/src/khal.c **** 	}
 226              		.loc 1 75 59 view .LVU53
 227 001c 0009     		lsrs	r0, r0, #4
 228 001e 7047     		bx	lr
 229              	.L21:
 230              		.align	2
 231              	.L20:
 232 0020 14ED00E0 		.word	-536810220
 233              		.cfi_endproc
 234              	.LFE4:
 236              		.section	.text.kCoreEnableInterrupt,"ax",%progbits
 237              		.align	1
 238              		.global	kCoreEnableInterrupt
 239              		.syntax unified
 240              		.thumb
 241              		.thumb_func
 243              	kCoreEnableInterrupt:
 244              	.LVL17:
 245              	.LFB5:
  83:arch/armv7m/kernel/src/khal.c **** 
  84:arch/armv7m/kernel/src/khal.c **** void kCoreEnableInterrupt( int IRQn)
  85:arch/armv7m/kernel/src/khal.c **** {
 246              		.loc 1 85 1 is_stmt 1 view -0
 247              		.cfi_startproc
 248              		@ args = 0, pretend = 0, frame = 0
 249              		@ frame_needed = 0, uses_anonymous_args = 0
 250              		@ link register save eliminated.
  86:arch/armv7m/kernel/src/khal.c **** 	if (IRQn >= 0)
 251              		.loc 1 86 2 view .LVU55
 252              		.loc 1 86 5 is_stmt 0 view .LVU56
 253 0000 0028     		cmp	r0, #0
 254              		.loc 1 86 5 view .LVU57
 255 0002 07DB     		blt	.L22
  87:arch/armv7m/kernel/src/khal.c **** 	{
  88:arch/armv7m/kernel/src/khal.c **** 		RK_CORE_NVIC->ISER[IRQn >> 5] = (1UL << (IRQn & 0x1F));
 256              		.loc 1 88 3 is_stmt 1 view .LVU58
ARM GAS  /var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s 			page 7


 257              		.loc 1 88 49 is_stmt 0 view .LVU59
 258 0004 00F01F02 		and	r2, r0, #31
 259              		.loc 1 88 27 view .LVU60
 260 0008 4011     		asrs	r0, r0, #5
 261              	.LVL18:
 262              		.loc 1 88 40 view .LVU61
 263 000a 0123     		movs	r3, #1
 264 000c 9340     		lsls	r3, r3, r2
 265              		.loc 1 88 33 view .LVU62
 266 000e 024A     		ldr	r2, .L24
 267 0010 42F82030 		str	r3, [r2, r0, lsl #2]
 268              	.L22:
  89:arch/armv7m/kernel/src/khal.c **** 	}
  90:arch/armv7m/kernel/src/khal.c **** }
 269              		.loc 1 90 1 view .LVU63
 270 0014 7047     		bx	lr
 271              	.L25:
 272 0016 00BF     		.align	2
 273              	.L24:
 274 0018 00E100E0 		.word	-536813312
 275              		.cfi_endproc
 276              	.LFE5:
 278              		.section	.text.kCoreDisableInterrupt,"ax",%progbits
 279              		.align	1
 280              		.global	kCoreDisableInterrupt
 281              		.syntax unified
 282              		.thumb
 283              		.thumb_func
 285              	kCoreDisableInterrupt:
 286              	.LVL19:
 287              	.LFB6:
  91:arch/armv7m/kernel/src/khal.c **** 
  92:arch/armv7m/kernel/src/khal.c **** void kCoreDisableInterrupt( int IRQn)
  93:arch/armv7m/kernel/src/khal.c **** {
 288              		.loc 1 93 1 is_stmt 1 view -0
 289              		.cfi_startproc
 290              		@ args = 0, pretend = 0, frame = 0
 291              		@ frame_needed = 0, uses_anonymous_args = 0
 292              		@ link register save eliminated.
  94:arch/armv7m/kernel/src/khal.c **** 	if (IRQn >= 0)
 293              		.loc 1 94 2 view .LVU65
 294              		.loc 1 94 5 is_stmt 0 view .LVU66
 295 0000 0028     		cmp	r0, #0
 296              		.loc 1 94 5 view .LVU67
 297 0002 08DB     		blt	.L26
  95:arch/armv7m/kernel/src/khal.c **** 	{
  96:arch/armv7m/kernel/src/khal.c **** 		RK_CORE_NVIC->ICER[IRQn >> 5] = (1UL << (IRQn & 0x1F));
 298              		.loc 1 96 3 is_stmt 1 view .LVU68
 299              		.loc 1 96 49 is_stmt 0 view .LVU69
 300 0004 00F01F02 		and	r2, r0, #31
 301              		.loc 1 96 27 view .LVU70
 302 0008 4011     		asrs	r0, r0, #5
 303              	.LVL20:
 304              		.loc 1 96 40 view .LVU71
 305 000a 0123     		movs	r3, #1
 306 000c 9340     		lsls	r3, r3, r2
 307              		.loc 1 96 33 view .LVU72
ARM GAS  /var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s 			page 8


 308 000e 2030     		adds	r0, r0, #32
 309 0010 014A     		ldr	r2, .L28
 310 0012 42F82030 		str	r3, [r2, r0, lsl #2]
 311              	.L26:
  97:arch/armv7m/kernel/src/khal.c **** 	}
  98:arch/armv7m/kernel/src/khal.c **** }
 312              		.loc 1 98 1 view .LVU73
 313 0016 7047     		bx	lr
 314              	.L29:
 315              		.align	2
 316              	.L28:
 317 0018 00E100E0 		.word	-536813312
 318              		.cfi_endproc
 319              	.LFE6:
 321              		.section	.text.kCoreClearPendingInterrupt,"ax",%progbits
 322              		.align	1
 323              		.global	kCoreClearPendingInterrupt
 324              		.syntax unified
 325              		.thumb
 326              		.thumb_func
 328              	kCoreClearPendingInterrupt:
 329              	.LVL21:
 330              	.LFB7:
  99:arch/armv7m/kernel/src/khal.c **** 
 100:arch/armv7m/kernel/src/khal.c **** void kCoreClearPendingInterrupt( int IRQn)
 101:arch/armv7m/kernel/src/khal.c **** {
 331              		.loc 1 101 1 is_stmt 1 view -0
 332              		.cfi_startproc
 333              		@ args = 0, pretend = 0, frame = 0
 334              		@ frame_needed = 0, uses_anonymous_args = 0
 335              		@ link register save eliminated.
 102:arch/armv7m/kernel/src/khal.c **** 	if (IRQn >= 0)
 336              		.loc 1 102 2 view .LVU75
 337              		.loc 1 102 5 is_stmt 0 view .LVU76
 338 0000 0028     		cmp	r0, #0
 339              		.loc 1 102 5 view .LVU77
 340 0002 08DB     		blt	.L30
 103:arch/armv7m/kernel/src/khal.c **** 	{
 104:arch/armv7m/kernel/src/khal.c **** 		RK_CORE_NVIC->ICPR[IRQn >> 5] = (1UL << (IRQn & 0x1F));
 341              		.loc 1 104 3 is_stmt 1 view .LVU78
 342              		.loc 1 104 49 is_stmt 0 view .LVU79
 343 0004 00F01F02 		and	r2, r0, #31
 344              		.loc 1 104 27 view .LVU80
 345 0008 4011     		asrs	r0, r0, #5
 346              	.LVL22:
 347              		.loc 1 104 40 view .LVU81
 348 000a 0123     		movs	r3, #1
 349 000c 9340     		lsls	r3, r3, r2
 350              		.loc 1 104 33 view .LVU82
 351 000e 6030     		adds	r0, r0, #96
 352 0010 014A     		ldr	r2, .L32
 353 0012 42F82030 		str	r3, [r2, r0, lsl #2]
 354              	.L30:
 105:arch/armv7m/kernel/src/khal.c **** 	}
 106:arch/armv7m/kernel/src/khal.c **** }
 355              		.loc 1 106 1 view .LVU83
 356 0016 7047     		bx	lr
ARM GAS  /var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s 			page 9


 357              	.L33:
 358              		.align	2
 359              	.L32:
 360 0018 00E100E0 		.word	-536813312
 361              		.cfi_endproc
 362              	.LFE7:
 364              		.section	.text.kCoreSetPendingInterrupt,"ax",%progbits
 365              		.align	1
 366              		.global	kCoreSetPendingInterrupt
 367              		.syntax unified
 368              		.thumb
 369              		.thumb_func
 371              	kCoreSetPendingInterrupt:
 372              	.LVL23:
 373              	.LFB8:
 107:arch/armv7m/kernel/src/khal.c **** 
 108:arch/armv7m/kernel/src/khal.c **** void kCoreSetPendingInterrupt( int IRQn)
 109:arch/armv7m/kernel/src/khal.c **** {
 374              		.loc 1 109 1 is_stmt 1 view -0
 375              		.cfi_startproc
 376              		@ args = 0, pretend = 0, frame = 0
 377              		@ frame_needed = 0, uses_anonymous_args = 0
 378              		@ link register save eliminated.
 110:arch/armv7m/kernel/src/khal.c **** 	if (IRQn >= 0)
 379              		.loc 1 110 2 view .LVU85
 380              		.loc 1 110 5 is_stmt 0 view .LVU86
 381 0000 0028     		cmp	r0, #0
 382              		.loc 1 110 5 view .LVU87
 383 0002 08DB     		blt	.L34
 111:arch/armv7m/kernel/src/khal.c **** 	{
 112:arch/armv7m/kernel/src/khal.c **** 		RK_CORE_NVIC->ISPR[IRQn >> 5] = (1UL << (IRQn & 0x1F));
 384              		.loc 1 112 3 is_stmt 1 view .LVU88
 385              		.loc 1 112 49 is_stmt 0 view .LVU89
 386 0004 00F01F02 		and	r2, r0, #31
 387              		.loc 1 112 27 view .LVU90
 388 0008 4011     		asrs	r0, r0, #5
 389              	.LVL24:
 390              		.loc 1 112 40 view .LVU91
 391 000a 0123     		movs	r3, #1
 392 000c 9340     		lsls	r3, r3, r2
 393              		.loc 1 112 33 view .LVU92
 394 000e 4030     		adds	r0, r0, #64
 395 0010 014A     		ldr	r2, .L36
 396 0012 42F82030 		str	r3, [r2, r0, lsl #2]
 397              	.L34:
 113:arch/armv7m/kernel/src/khal.c **** 	}
 114:arch/armv7m/kernel/src/khal.c **** }
 398              		.loc 1 114 1 view .LVU93
 399 0016 7047     		bx	lr
 400              	.L37:
 401              		.align	2
 402              	.L36:
 403 0018 00E100E0 		.word	-536813312
 404              		.cfi_endproc
 405              	.LFE8:
 407              		.section	.text.kCoreGetPendingInterrupt,"ax",%progbits
 408              		.align	1
ARM GAS  /var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s 			page 10


 409              		.global	kCoreGetPendingInterrupt
 410              		.syntax unified
 411              		.thumb
 412              		.thumb_func
 414              	kCoreGetPendingInterrupt:
 415              	.LVL25:
 416              	.LFB9:
 115:arch/armv7m/kernel/src/khal.c **** 
 116:arch/armv7m/kernel/src/khal.c **** unsigned kCoreGetPendingInterrupt( int IRQn)
 117:arch/armv7m/kernel/src/khal.c **** {
 417              		.loc 1 117 1 is_stmt 1 view -0
 418              		.cfi_startproc
 419              		@ args = 0, pretend = 0, frame = 0
 420              		@ frame_needed = 0, uses_anonymous_args = 0
 421              		@ link register save eliminated.
 118:arch/armv7m/kernel/src/khal.c **** 	if (IRQn >= 0)
 422              		.loc 1 118 2 view .LVU95
 423              		.loc 1 118 5 is_stmt 0 view .LVU96
 424 0000 0028     		cmp	r0, #0
 425              		.loc 1 118 5 view .LVU97
 426 0002 0BDB     		blt	.L40
 119:arch/armv7m/kernel/src/khal.c **** 	{
 120:arch/armv7m/kernel/src/khal.c **** 		return (((RK_CORE_NVIC->ISPR[IRQn >> 5] & (1UL << (IRQn & 0x1F))) != 0) ?
 427              		.loc 1 120 3 is_stmt 1 view .LVU98
 428              		.loc 1 120 37 is_stmt 0 view .LVU99
 429 0004 4311     		asrs	r3, r0, #5
 430              		.loc 1 120 31 view .LVU100
 431 0006 4033     		adds	r3, r3, #64
 432 0008 054A     		ldr	r2, .L41
 433 000a 52F82330 		ldr	r3, [r2, r3, lsl #2]
 434              		.loc 1 120 59 view .LVU101
 435 000e 00F01F00 		and	r0, r0, #31
 436              	.LVL26:
 437              		.loc 1 120 69 view .LVU102
 438 0012 23FA00F0 		lsr	r0, r3, r0
 121:arch/armv7m/kernel/src/khal.c **** 				1U : 0U);
 439              		.loc 1 121 8 view .LVU103
 440 0016 00F00100 		and	r0, r0, #1
 441 001a 7047     		bx	lr
 442              	.LVL27:
 443              	.L40:
 122:arch/armv7m/kernel/src/khal.c **** 	}
 123:arch/armv7m/kernel/src/khal.c **** 	else
 124:arch/armv7m/kernel/src/khal.c **** 	{
 125:arch/armv7m/kernel/src/khal.c **** 		return 0U;
 444              		.loc 1 125 10 view .LVU104
 445 001c 0020     		movs	r0, #0
 446              	.LVL28:
 126:arch/armv7m/kernel/src/khal.c **** 	}
 127:arch/armv7m/kernel/src/khal.c **** }
 447              		.loc 1 127 1 view .LVU105
 448 001e 7047     		bx	lr
 449              	.L42:
 450              		.align	2
 451              	.L41:
 452 0020 00E100E0 		.word	-536813312
 453              		.cfi_endproc
ARM GAS  /var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s 			page 11


 454              	.LFE9:
 456              		.section	.text.kCoreSysTickConfig,"ax",%progbits
 457              		.align	1
 458              		.global	kCoreSysTickConfig
 459              		.syntax unified
 460              		.thumb
 461              		.thumb_func
 463              	kCoreSysTickConfig:
 464              	.LVL29:
 465              	.LFB10:
 128:arch/armv7m/kernel/src/khal.c **** 
 129:arch/armv7m/kernel/src/khal.c **** /*
 130:arch/armv7m/kernel/src/khal.c ****  * SysTickCore Functions
 131:arch/armv7m/kernel/src/khal.c ****  */
 132:arch/armv7m/kernel/src/khal.c **** 
 133:arch/armv7m/kernel/src/khal.c **** unsigned kCoreSysTickConfig( unsigned ticks)
 134:arch/armv7m/kernel/src/khal.c **** {
 466              		.loc 1 134 1 is_stmt 1 view -0
 467              		.cfi_startproc
 468              		@ args = 0, pretend = 0, frame = 0
 469              		@ frame_needed = 0, uses_anonymous_args = 0
 470              		@ link register save eliminated.
 135:arch/armv7m/kernel/src/khal.c **** 	/* CheckCore if number of ticks is valid */
 136:arch/armv7m/kernel/src/khal.c **** 	if ((ticks - 1) > 0xFFFFFFUL)
 471              		.loc 1 136 2 view .LVU107
 472              		.loc 1 136 13 is_stmt 0 view .LVU108
 473 0000 0138     		subs	r0, r0, #1
 474              	.LVL30:
 475              		.loc 1 136 5 view .LVU109
 476 0002 B0F1807F 		cmp	r0, #16777216
 477 0006 07D2     		bcs	.L45
 137:arch/armv7m/kernel/src/khal.c **** 	{
 138:arch/armv7m/kernel/src/khal.c **** 		return (0xFFFFFFFF);
 139:arch/armv7m/kernel/src/khal.c **** 	}
 140:arch/armv7m/kernel/src/khal.c **** 
 141:arch/armv7m/kernel/src/khal.c **** 	/* Set reload register */
 142:arch/armv7m/kernel/src/khal.c **** 	RK_CORE_SYSTICK->LOAD = (ticks - 1);
 478              		.loc 1 142 2 is_stmt 1 view .LVU110
 479              		.loc 1 142 24 is_stmt 0 view .LVU111
 480 0008 4FF0E023 		mov	r3, #-536813568
 481 000c 5861     		str	r0, [r3, #20]
 143:arch/armv7m/kernel/src/khal.c **** 
 144:arch/armv7m/kernel/src/khal.c **** 	/* Reset the SysTick counter */
 145:arch/armv7m/kernel/src/khal.c **** 	RK_CORE_SYSTICK->VAL = 0;
 482              		.loc 1 145 2 is_stmt 1 view .LVU112
 483              		.loc 1 145 23 is_stmt 0 view .LVU113
 484 000e 0020     		movs	r0, #0
 485              	.LVL31:
 486              		.loc 1 145 23 view .LVU114
 487 0010 9861     		str	r0, [r3, #24]
 488              	.LVL32:
 146:arch/armv7m/kernel/src/khal.c **** 
 147:arch/armv7m/kernel/src/khal.c **** 	/* Enable SysTickCore IRQ and timer */
 148:arch/armv7m/kernel/src/khal.c **** 	RK_CORE_SYSTICK->CTRL = 0x07;/* Enable counter, interrupts, and use processor clock */
 489              		.loc 1 148 2 is_stmt 1 view .LVU115
 490              		.loc 1 148 24 is_stmt 0 view .LVU116
 491 0012 0722     		movs	r2, #7
ARM GAS  /var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s 			page 12


 492 0014 1A61     		str	r2, [r3, #16]
 149:arch/armv7m/kernel/src/khal.c **** 
 150:arch/armv7m/kernel/src/khal.c **** 	return (0);
 493              		.loc 1 150 2 is_stmt 1 view .LVU117
 494              		.loc 1 150 9 is_stmt 0 view .LVU118
 495 0016 7047     		bx	lr
 496              	.L45:
 138:arch/armv7m/kernel/src/khal.c **** 	}
 497              		.loc 1 138 10 view .LVU119
 498 0018 4FF0FF30 		mov	r0, #-1
 151:arch/armv7m/kernel/src/khal.c **** }
 499              		.loc 1 151 1 view .LVU120
 500 001c 7047     		bx	lr
 501              		.cfi_endproc
 502              	.LFE10:
 504              		.section	.text.kCoreGetSysTickValue,"ax",%progbits
 505              		.align	1
 506              		.global	kCoreGetSysTickValue
 507              		.syntax unified
 508              		.thumb
 509              		.thumb_func
 511              	kCoreGetSysTickValue:
 512              	.LFB11:
 152:arch/armv7m/kernel/src/khal.c **** 
 153:arch/armv7m/kernel/src/khal.c **** unsigned kCoreGetSysTickValue( void)
 154:arch/armv7m/kernel/src/khal.c **** {
 513              		.loc 1 154 1 is_stmt 1 view -0
 514              		.cfi_startproc
 515              		@ args = 0, pretend = 0, frame = 0
 516              		@ frame_needed = 0, uses_anonymous_args = 0
 517              		@ link register save eliminated.
 155:arch/armv7m/kernel/src/khal.c **** 	return (RK_CORE_SYSTICK->VAL);
 518              		.loc 1 155 2 view .LVU122
 519              		.loc 1 155 25 is_stmt 0 view .LVU123
 520 0000 4FF0E023 		mov	r3, #-536813568
 521 0004 9869     		ldr	r0, [r3, #24]
 156:arch/armv7m/kernel/src/khal.c **** }
 522              		.loc 1 156 1 view .LVU124
 523 0006 7047     		bx	lr
 524              		.cfi_endproc
 525              	.LFE11:
 527              		.section	.text.kCoreEnableSysTick,"ax",%progbits
 528              		.align	1
 529              		.global	kCoreEnableSysTick
 530              		.syntax unified
 531              		.thumb
 532              		.thumb_func
 534              	kCoreEnableSysTick:
 535              	.LFB12:
 157:arch/armv7m/kernel/src/khal.c **** 
 158:arch/armv7m/kernel/src/khal.c **** void kCoreEnableSysTick( void)
 159:arch/armv7m/kernel/src/khal.c **** {
 536              		.loc 1 159 1 is_stmt 1 view -0
 537              		.cfi_startproc
 538              		@ args = 0, pretend = 0, frame = 0
 539              		@ frame_needed = 0, uses_anonymous_args = 0
 540              		@ link register save eliminated.
ARM GAS  /var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s 			page 13


 160:arch/armv7m/kernel/src/khal.c **** 	RK_CORE_SYSTICK->CTRL |= 0x01;
 541              		.loc 1 160 2 view .LVU126
 542              		.loc 1 160 17 is_stmt 0 view .LVU127
 543 0000 4FF0E022 		mov	r2, #-536813568
 544 0004 1369     		ldr	r3, [r2, #16]
 545              		.loc 1 160 24 view .LVU128
 546 0006 43F00103 		orr	r3, r3, #1
 547 000a 1361     		str	r3, [r2, #16]
 161:arch/armv7m/kernel/src/khal.c **** }
 548              		.loc 1 161 1 view .LVU129
 549 000c 7047     		bx	lr
 550              		.cfi_endproc
 551              	.LFE12:
 553              		.section	.text.kCoreDisableSysTick,"ax",%progbits
 554              		.align	1
 555              		.global	kCoreDisableSysTick
 556              		.syntax unified
 557              		.thumb
 558              		.thumb_func
 560              	kCoreDisableSysTick:
 561              	.LFB13:
 162:arch/armv7m/kernel/src/khal.c **** 
 163:arch/armv7m/kernel/src/khal.c **** void kCoreDisableSysTick( void)
 164:arch/armv7m/kernel/src/khal.c **** {
 562              		.loc 1 164 1 is_stmt 1 view -0
 563              		.cfi_startproc
 564              		@ args = 0, pretend = 0, frame = 0
 565              		@ frame_needed = 0, uses_anonymous_args = 0
 566              		@ link register save eliminated.
 165:arch/armv7m/kernel/src/khal.c **** 	RK_CORE_SYSTICK->CTRL &= (unsigned) ~0x01;
 567              		.loc 1 165 2 view .LVU131
 568              		.loc 1 165 17 is_stmt 0 view .LVU132
 569 0000 4FF0E022 		mov	r2, #-536813568
 570 0004 1369     		ldr	r3, [r2, #16]
 571              		.loc 1 165 24 view .LVU133
 572 0006 23F00103 		bic	r3, r3, #1
 573 000a 1361     		str	r3, [r2, #16]
 166:arch/armv7m/kernel/src/khal.c **** }
 574              		.loc 1 166 1 view .LVU134
 575 000c 7047     		bx	lr
 576              		.cfi_endproc
 577              	.LFE13:
 579              		.text
 580              	.Letext0:
 581              		.file 2 "arch/armv7m/kernel/inc/khal.h"
ARM GAS  /var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s 			page 14


DEFINED SYMBOLS
                            *ABS*:00000000 khal.c
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:19     .text.kCoreSetPriorityGrouping:00000000 $t
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:25     .text.kCoreSetPriorityGrouping:00000000 kCoreSetPriorityGrouping
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:63     .text.kCoreSetPriorityGrouping:0000001c $d
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:68     .text.kCoreGetPriorityGrouping:00000000 $t
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:74     .text.kCoreGetPriorityGrouping:00000000 kCoreGetPriorityGrouping
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:91     .text.kCoreGetPriorityGrouping:0000000c $d
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:96     .text.kCoreEnableFaults:00000000 $t
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:102    .text.kCoreEnableFaults:00000000 kCoreEnableFaults
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:121    .text.kCoreEnableFaults:0000000c $d
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:126    .text.kCoreSetInterruptPriority:00000000 $t
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:132    .text.kCoreSetInterruptPriority:00000000 kCoreSetInterruptPriority
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:179    .text.kCoreSetInterruptPriority:00000024 $d
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:184    .text.kCoreGetInterruptPriority:00000000 $t
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:190    .text.kCoreGetInterruptPriority:00000000 kCoreGetInterruptPriority
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:232    .text.kCoreGetInterruptPriority:00000020 $d
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:237    .text.kCoreEnableInterrupt:00000000 $t
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:243    .text.kCoreEnableInterrupt:00000000 kCoreEnableInterrupt
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:274    .text.kCoreEnableInterrupt:00000018 $d
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:279    .text.kCoreDisableInterrupt:00000000 $t
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:285    .text.kCoreDisableInterrupt:00000000 kCoreDisableInterrupt
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:317    .text.kCoreDisableInterrupt:00000018 $d
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:322    .text.kCoreClearPendingInterrupt:00000000 $t
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:328    .text.kCoreClearPendingInterrupt:00000000 kCoreClearPendingInterrupt
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:360    .text.kCoreClearPendingInterrupt:00000018 $d
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:365    .text.kCoreSetPendingInterrupt:00000000 $t
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:371    .text.kCoreSetPendingInterrupt:00000000 kCoreSetPendingInterrupt
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:403    .text.kCoreSetPendingInterrupt:00000018 $d
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:408    .text.kCoreGetPendingInterrupt:00000000 $t
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:414    .text.kCoreGetPendingInterrupt:00000000 kCoreGetPendingInterrupt
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:452    .text.kCoreGetPendingInterrupt:00000020 $d
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:457    .text.kCoreSysTickConfig:00000000 $t
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:463    .text.kCoreSysTickConfig:00000000 kCoreSysTickConfig
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:505    .text.kCoreGetSysTickValue:00000000 $t
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:511    .text.kCoreGetSysTickValue:00000000 kCoreGetSysTickValue
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:528    .text.kCoreEnableSysTick:00000000 $t
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:534    .text.kCoreEnableSysTick:00000000 kCoreEnableSysTick
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:554    .text.kCoreDisableSysTick:00000000 $t
/var/folders/fg/4fzv35n91mbcgx4z5jzqdsl40000gn/T//cct9p5zd.s:560    .text.kCoreDisableSysTick:00000000 kCoreDisableSysTick

NO UNDEFINED SYMBOLS
